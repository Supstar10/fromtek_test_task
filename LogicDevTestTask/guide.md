# Гайд по чтению скрипта 

## Необходимые понятия

**Робот**/бот/голосовой помощник/виртуальный ассистент - заменяющая реального человека-оператора программа, 
необходимая для достижения поставленной цели (продажа услуг, проведение опросов и тд и тп).
Как правило запускается на массовую аудиторию (что означает, что ошибки в ней недопустимы!)

**Абонент** - человек, поддерживающий разговор с роботом.

*Робот слышит абонента* - означает, что робот может реагировать на фразу абонента посредством анализа сказанного.

**Сущность** - набор фраз абонента, объединённых общим направлением мысли. Проще говоря, о чём **в целом** идёт речь.
Фраза абонента может содержать несколько сущностей.

**Значение сущности** - конкретное направление мысли, уточнение, о чём **именно** идёт речь.

Возможный пример

Фраза абонента: "_Хочу с рейтингом больше 7_"
- Сущность: "**rating**" - абонент говорит про рейтинг
- Значение: "**7_or_more**" - абонента интересует рейтинг 7 и выше

> **Что необходимо понимать при выполнении тестового задания**:
> 
> В тестовом задании происходит лишь имитация звонка через консоль. 
> В реальности же абонент с роботом разговаривают по телефону.

## Столбцы 

- **Pattern** - фраза или часть фразы абонента;
- **Entity** - сущность и значение сущности, которые необходимо обработать;
- **Result** - то, что нужно записать в "аналитику";
- **GoTo** - переход - что должен сделать робот при отработке сущности **слева**. 
  В переходах могут встретиться специаьные символы:
  - Если в GoTo есть символ "->", это означает, что первый раз необходимо озвучить ТОЛЬКО пропт слева от "стрелочки", 
  а при повторе сущности - промпт справа от "стрелочки";
  - Если в GoTo есть символ "&", это называется "склейка". Таким символом обозначаются промпты, которые должны прозвучать друг за другом;
- **Action** - действие, которое относится к промпту **справа**:
  - _say_ - только говорим;
  - _say_and_listen_ - говорим и слушаем;
  - _synthesize_ - синтезируем (воспроизводим кастомный текст);
- **Name** - название промпта;
- **Text** - текст промпта;

## Строки

Строки задают приоритет проверок сущностей. Действуем по принципе "что вижу, то и пишу".

Например, если одновременно распознались сущности horror==false и rating==7_or_more, 
а в скрипте horror==false выше, чем rating==7_or_more, то и в логике должно быть то же самое, а, соответственно, 
в звонке абонент должен услышать отработку по horror==false.

## Как читать скрипт и процесс общения с роботом

> Скрипт читается сверху вниз, слева направо.

После "озвучивания" вступительного промпта абоненту даётся возможность ответить роботу.

Предполагается, что абонент может ответить фразами из колонки Pattern или промолчать.
- Если абонент молчит, то бот отрабатывает кейс "тишина";
- Если абонент отвечает фразами из колонки Pattern, бот отрабатываем фразу робота, 
переходя в соответствующий переход колонки GoTo, в порядке приоритета сущностей;
- Если ни одна сущность не сработала, бот отработает кейс "нераспознанная речь";

Анализирую фразу абонента, робот проставляет по необходимости соответствующий резалт из колонки Result.

Цикл повторяется до тех пор, пока абонент или робот не положат трубку
- Робот кладёт трубку после озвучивания промпта вида "hangup_X";
- Абонент кладёт трубку, если написать в консоль "hangup".
